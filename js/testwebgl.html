<!DOCTYPE html>
<html>
    <head>
        <script src="Texture.js"></script>
        <script>

            const offscreen = new OffscreenCanvas(256, 256);
            const gl = offscreen.getContext('webgl2');

            const ext = gl.getExtension("EXT_color_buffer_float");
            if (!ext) {
                alert("need EXT_color_buffer_float");
            }

            const data = new Float32Array([-1.25, 13, 2, 3]);

            const t = Texture.createTextureFloat32_4(1, 1, data, true);
            console.log(t.getData());

            /*const t = gl.createTexture();
            
            gl.bindTexture(gl.TEXTURE_2D, t);
            
            
            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RG16I, 1, 1, 0, gl.RG_INTEGER, gl.SHORT, data);
            
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);


            fb = gl.createFramebuffer();

            // make this the current frame buffer
            gl.bindFramebuffer(gl.FRAMEBUFFER, fb);

            // attach the texture to the framebuffer.
            gl.framebufferTexture2D(
                gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0,
                gl.TEXTURE_2D, t, 0);

            // check if you can read from this type of texture.
            canRead = (gl.checkFramebufferStatus(gl.FRAMEBUFFER) == gl.FRAMEBUFFER_COMPLETE);
            console.log(canRead);

            out = new Int16Array(2);
            gl.readBuffer(gl.COLOR_ATTACHMENT0);
            gl.readPixels(0, 0, 1, 1, gl.RG_INTEGER, gl.SHORT, out);

            console.log(out);*/
        </script>
    </head>
</html>